{"version":3,"sources":["../admin/auditing.js","../admin/radiusauditlog.js","../admin/option82.js"],"names":["init","$","on","event","match","exec","delegateTarget","id","emptyId","trigger","addClass","modal","saved_search_form","search_form","uri","URI","attr","query","resource","serialize","replace","find","ajax","url","type","data","always","reset","done","location","reload","fail","jqXHR","animate","scrollTop","status_msg","getStatusMsg","showError","this","focus","window","hashchange","pfOnHashChange","updateSection","items","RadiusAuditLog","RadiusAuditLogView","parent","prototype","Items","formName","modalId","createSelector","get","options","success","errorSibling","post","ItemView","call","resetSearch","proxy","F","e","preventDefault","form","val","children","click","submit","DHCPOption82View"],"mappings":"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","file":"auditing.js","sourcesContent":["/* -*- Mode: js; indent-tabs-mode: nil; js-indent-level: 4 -*- */\n\nfunction init() {\n    $('#section').on('section.loaded', function(event) {\n        // Initialization common to both sections (RADIUS Audit Log & DHCP Option82)\n        $('[id$=\"Empty\"]').on('click', '[href=\"#add\"]', function(event) {\n            var match = /(.+)Empty/.exec(event.delegateTarget.id);\n            var id = match[1];\n            var emptyId = match[0];\n            $('#'+id).trigger('addrow');\n            $('#'+emptyId).addClass('hidden');\n            return false;\n        });\n        var modal  = $(\"#savedSearch\");\n        var saved_search_form = $(\"#savedSearchForm\");\n        var search_form = $('#search');\n        saved_search_form.on('submit', function(event) {\n            modal.modal('hide');\n            var uri = new URI(search_form.attr('action'));\n            var query = uri.resource() +\n                \"?\" +\n                search_form.serialize();\n            query = query.replace(/^\\//,'');\n            saved_search_form\n            .find('[name=\"query\"]')\n            .attr('value',query);\n            $.ajax({\n                'url'  : saved_search_form.attr('action'),\n                'type' : saved_search_form.attr('method') || \"POST\",\n                'data' : saved_search_form.serialize()\n                })\n                .always(function() {\n                    modal.modal('hide');\n                    saved_search_form[0].reset();\n                })\n                .done(function(data) {\n                    location.reload();\n                })\n                .fail(function(jqXHR) {\n                    $(\"body,html\").animate({scrollTop:0}, 'fast');\n                    var status_msg = getStatusMsg(jqXHR);\n                    showError($('#section h2'), status_msg);\n                });\n            return false;\n        });\n        modal.on('shown', function(event) {\n            $(this).find(':input:first').focus();\n        });\n    });\n\n    /* Initialize datepickers */\n  $(window).hashchange(pfOnHashChange(updateSection,'/auditing/radiuslog/'));\n  $(window).hashchange();\n}\n","/* -*- Mode: js; indent-tabs-mode: nil; js-indent-level: 4 -*- */\n\n$(function() { // DOM ready\n    var items = new RadiusAuditLog();\n    var view = new RadiusAuditLogView({ items: items, parent: $('#section') });\n});\n\n/*\n * The RadiusAuditLog class defines the operations available from the controller.\n */\nvar RadiusAuditLog = function() {\n};\n\nRadiusAuditLog.prototype = new Items();\n\nRadiusAuditLog.prototype.id  = '#radiusAuditLog';\n\nRadiusAuditLog.prototype.formName  = 'modalRadiusAuditLog';\n\nRadiusAuditLog.prototype.modalId   = '#modalRadiusAuditLog';\n\nRadiusAuditLog.prototype.createSelector = \".createRadiusAuditLog\";\n\nRadiusAuditLog.prototype.get = function(options) {\n    $.ajax({\n        url: options.url\n    })\n        .always(options.always)\n        .done(options.success)\n        .fail(function(jqXHR) {\n            var status_msg = getStatusMsg(jqXHR);\n            showError(options.errorSibling, status_msg);\n        });\n};\n\nRadiusAuditLog.prototype.post = function(options) {\n    $.ajax({\n        url: options.url,\n        type: 'POST',\n        data: options.data\n    })\n        .always(options.always)\n        .done(options.success)\n        .fail(function(jqXHR) {\n            var status_msg = getStatusMsg(jqXHR);\n            showError(options.errorSibling, status_msg);\n        });\n};\n\n/*\n * The RadiusAuditLogView class defines the DOM operations from the Web interface.\n */\n\nvar RadiusAuditLogView = function(options) {\n    ItemView.call(this,options);\n    var that = this;\n    this.parent = options.parent;\n    this.items = options.items;\n    var resetSearch = $.proxy(this.resetSearch, this);\n    options.parent.on('click', '#radiuslog_reset', resetSearch);\n};\n\nRadiusAuditLogView.prototype = (function(){\n    function F(){}\n    F.prototype = ItemView.prototype;\n    return new F();\n})();\n\nRadiusAuditLogView.prototype.resetSearch = function(e) {\n    e.preventDefault();\n    var form = $('form[name=\"search\"]');\n    form.find('#start_date,#start_time,#end_date,#end_time').val('');\n    form.find('select[name=\"per_page\"]').val('25');\n    form.find('select[name=\"all_or_any\"]').val('all');\n    $('#searchConditions').find('tbody').children(':not(.hidden)').find('[href=\"#delete\"]').click();\n    form.submit();\n};\n","$(function() { // DOM ready\n    var view = new DHCPOption82View({ items: new Items(), parent: $('#section') });\n});\n\n/*\n * The DHCPOption82View class defines the DOM operations from the Web interface.\n */\n\nvar DHCPOption82View = function(options) {\n    var that = this;\n    this.parent = options.parent;\n    this.items = options.items;\n    var resetSearch = $.proxy(this.resetSearch, this);\n    options.parent.on('click', '#dhcpoption82_reset', resetSearch);\n};\n\nDHCPOption82View.prototype = (function(){\n    function F(){}\n    F.prototype = ItemView.prototype;\n    return new F();\n})();\n\nDHCPOption82View.prototype.resetSearch = function(e) {\n    e.preventDefault();\n    var form = $('form[name=\"search\"]');\n    form.find('select[name=\"per_page\"]').val('25');\n    form.find('select[name=\"all_or_any\"]').val('all');\n    $('#searchConditions').find('tbody').children(':not(.hidden)').find('[href=\"#delete\"]').click();\n    form.submit();\n};\n"]}